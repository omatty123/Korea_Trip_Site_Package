<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2025 ë´„ í•œêµ­ ì—¬í–‰ â€“ ì¼ì •</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root { --card-bg:#ffffff; --gray:#666; }
    body { font-family:'Inter',sans-serif; background:#f9fafb; margin:0; color:#111; padding-bottom:4rem; }
    header { position:sticky; top:0; background:#fff; border-bottom:1px solid #ddd; padding:.7rem 1rem; display:flex; justify-content:space-between; align-items:center; z-index:20; }
    #toggleBtn { padding:.35rem .9rem; border:1px solid #888; background:#f6f6f6; border-radius:.45rem; cursor:pointer; font-weight:600; }
    #toggleBtn:hover { background:#e9e9e9; }
    main { max-width:48rem; margin:auto; padding:1.2rem; }
    section.day-card { background:var(--card-bg); border-radius:10px; box-shadow:0 1px 4px rgba(0,0,0,.05); margin:1.25rem 0; padding:1rem 1.25rem; }
    h2 { margin:.2rem 0 .6rem; font-size:1.2rem; }
    ul { padding-left:1.1rem; margin:0; }
    li { margin:.3rem 0; line-height:1.45; }
    time { font-weight:600; color:var(--gray); }
    .editing [contenteditable="true"] { outline:2px dashed #4a90e2; background:#fdfdff; border-radius:4px; }
  </style>
</head>
<body>
  <header>
    <h1 style="margin:0;font-size:1.15rem;">ğŸ‡°ğŸ‡· 2025 í•œêµ­ ì—¬í–‰ ì¼ì •</h1>
    <button id="toggleBtn" aria-pressed="false">Edit</button>
  </header>
  <main id="itinerary">Loadingâ€¦</main>

  <script>
    const btn = document.getElementById('toggleBtn');
    const main = document.getElementById('itinerary');
    let editing = false;
    const editableSel = 'li';

    // build cards from JSON
    fetch('trip.json')
      .then(r => r.json())
      .then(render)
      .then(restoreEdits);

    function render(days) {
      main.textContent = '';
      days.forEach(day => {
        const sec = document.createElement('section');
        sec.className = 'day-card';
        sec.innerHTML = `<h2>${day.date} â€¢Â ${day.city}</h2><ul>${day.items.map((it,i)=>`<li data-key="${day.date}-${i}" class="editable"><time>${it.time}</time> ${it.text}</li>`).join('')}</ul>`;
        main.append(sec);
      });
    }

    // edit/view toggle
    btn.addEventListener('click', () => setMode(!editing));

    function setMode(edit) {
      editing = edit;
      document.body.classList.toggle('editing', editing);
      btn.textContent = editing ? 'View' : 'Edit';
      btn.setAttribute('aria-pressed', editing);
      document.querySelectorAll(editableSel).forEach(el => {
        el.contentEditable = editing;
        if (!editing) {
          localStorage.setItem(el.dataset.key, el.innerHTML.trim());
        }
      });
    }

    // restore saved edits
    function restoreEdits() {
      document.querySelectorAll(editableSel).forEach(el => {
        const saved = localStorage.getItem(el.dataset.key);
        if (saved !== null) el.innerHTML = saved;
      });
    }
  </script>
</body>
</html>
